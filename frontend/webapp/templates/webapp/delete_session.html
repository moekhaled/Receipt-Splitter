{% extends "webapp/base.html" %}

{% block title %}Delete Receipt{% endblock %}

{% block content %}
<div id="delete-container">
    <h2>Delete Receipt</h2>

    {% if error %}
        <p class="warning-text">{{ error }}</p>
    {% endif %}

    {% if session %}
        <p>
            Are you sure you want to delete the receipt:
            <strong>{{ session.title|default:"(untitled)" }}</strong>?
        </p>

        {% if persons %}
            <p class="muted-text">
                This will also remove {{ persons|length }} person{{ persons|length|pluralize }}.
            </p>
        {% endif %}
    {% else %}
        <p class="warning-text">Receipt not found.</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <button type="submit" class="btn-delete" {% if not session %}disabled{% endif %}>
            Yes, Delete
        </button>

        {# Cancel: do NOT rely on ORM `.pk`â€”use dict id or session_pk if present #}
        {% if session.id %}
            <a href="{% url 'session-details' session_pk=session.id %}" class="btn-cancel">
                Cancel
            </a>
        {% elif session_pk %}
            <a href="{% url 'session-details' session_pk=session_pk %}" class="btn-cancel">
                Cancel
            </a>
        {% else %}
            <a href="{% url 'all-sessions' %}" class="btn-cancel">
                Cancel
            </a>
        {% endif %}
    </form>
</div>
{% endblock %}
